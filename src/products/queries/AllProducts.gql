query AllProducts($first: Int!, $filters: String, $after: String) {
  products(first: $first, query: $filters, after: $after) {
    pageInfo {
      hasNextPage
      endCursor
    }

    edges {
      node {
        id
        title
        vendor
        totalInventory
        availableForSale
        options {
          name
          values
        }
        variants(first: 50) {
          edges {
            node {
              price {
                amount
                currencyCode
              }
              compareAtPrice {
                amount
                currencyCode
              }
            }
          }
        }

        images(first: 2) {
          edges {
            node {
              src
              url
            }
          }
        }
        collections(first: 2) {
          edges {
            node {
              title
            }
          }
        }
      }
    }
  }
}
